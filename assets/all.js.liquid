(function() {

  $(function() {
    $('.sign_in').click(function(e) {
      e.preventDefault();
      $('.modal.login').css('display', 'block');
      return setTimeout(function() {
        return $('.modal.login').addClass('modal_open');
      }, 1);
    });

    $('#login_container .cancel_button').click(function(e) {
      e.preventDefault();
      $('.modal.login').removeClass('modal_open');
      return setTimeout(function() {
        return $('.modal.login').css('display', 'none');
      }, 300);
    });

    $('.sign_up').click(function(e) {
      e.preventDefault();
      $('.modal.signup').css('display', 'block');
      return setTimeout(function() {
        return $('.modal.signup').addClass('modal_open');
      }, 1);
    });

    $('#signup_container .cancel_button').click(function(e) {
      e.preventDefault();

      $('.modal.signup').removeClass('modal_open');
      return setTimeout(function() {
        return $('.modal.signup').css('display', 'none');
      }, 300);
    });

    if ($('.total').text() === "0") {
      $(".checkout").css('display', 'none');
    }

    $(".thumbnails").on("click", "a", function(e){
      e.preventDefault();
      $(".thumbnails .product").removeClass("active");
      $(this).addClass("active");
      $(".product.full_view img").attr("src", $(this).find("img").attr("src"));
    });

    $("#recover_password_container").on("click", ".cancel_button", function(e){
      e.preventDefault();
      $("#recover_password_container").hide();
      $("#login_container").show();
    });

    $("#login_container").on("click", "#forgot_password", function(e){
      e.preventDefault();
      $("#recover_password_container").show();
      $("#login_container").hide();
    });

    return $(document).keyup(function(e) {
      if (e.keyCode === 27) {
        $('.modal').removeClass('modal_open');
        return setTimeout(function() {
          return $('.modal').css('display', 'none');
        }, 300);
      }
    });
  });

}).call(this);


$(document).ready(function(){
  if ($(".login_page").length > 0) {
    $('.modal.login').css('display', 'block');
    return setTimeout(function() {
      return $('.modal.login').addClass('modal_open');
    }, 1);
  }

  if ($(".register").length > 0) {
    $(".sign_up").click();
  }
});

$(function(){
  $(".homepage-products .product").pick(6);

  $.vegas('slideshow', {
    delay: 10000,
    step: $.cookie('slideShowStep', Number) || 0,
    backgrounds: [
      { src: '{{"bg-2x.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-1.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-2.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-3.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-4.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-5.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-6.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-7.jpg" | asset_url}}', fade: 1000 },
      { src: '{{"bg-8.jpg" | asset_url}}', fade: 1000 }
    ]
  })('overlay');

  // bind to vegas slide change to save cookie to preserve slide position on page load...
  $('body').bind('vegaswalk', function(e, bg, step) {
      $.cookie('slideShowStep', step, { path: '/' });
    }
  );
});

